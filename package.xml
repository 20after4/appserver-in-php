<?xml version="1.0" encoding="UTF-8"?>
<package packagerversion="1.9.0" version="2.0" xmlns="http://pear.php.net/dtd/package-2.0" xmlns:tasks="http://pear.php.net/dtd/tasks-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pear.php.net/dtd/tasks-1.0 http://pear.php.net/dtd/tasks-1.0.xsd http://pear.php.net/dtd/package-2.0 http://pear.php.net/dtd/package-2.0.xsd">
    <name>AppServer</name>
    <channel>pear.indeyets.pp.ru</channel>
    <summary>A set of components for building extremely fast universal web-apps</summary>
    <description>
        Web server interface for PHP, inspired by Ruby’s Rack and Python’s WSGI. It provides a common API for connecting PHP frameworks and applications to webservers.
    </description>

    <lead>
        <name>Alexey Zakhlestin</name>
        <user>indeyets</user>
        <email>indeyets@php.net</email>
        <active>yes</active>
    </lead>
    <contributor>
        <name>Stanislav Korchagin</name>
        <user></user>
        <email>korchasa@gmail.com</email>
        <active>yes</active>
    </contributor>
    <contributor>
        <name>Justin Forest</name>
        <user></user>
        <email>justin.forest@gmail.com</email>
        <active>yes</active>
    </contributor>

    <date>2010-12-14</date>
    <version>
        <release>0.3.3</release>
        <api>0.3.3</api>
    </version>
    <stability>
        <release>stable</release>
        <api>stable</api>
    </stability>
    <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
    <notes>
        - properly set php-path into "aip" tool
        - MOD_PHP Handler: added missing exception to MOD_PHP namespace
        - FileServe: assume, that PATH_INFO has leading slash
        - FileServe: set seek-position to beginning of stream, before returning it
        - ZeroMQ: less noise to console
        - Logger: second parameter (output stream) is optional now, and defaults to STDOUT
    </notes>

    <contents>
        <dir name="/" baseinstalldir="AppServer">
            <file role="php" name="autoload.php" />
            <file role="php" name="DaemonicHandler.class.php" />
            <file role="php" name="interfaces.php" />
            <file role="php" name="StringStream.class.php" />
            <file role="doc" name="AUTHORS" />
            <file role="doc" name="LICENSE" />

            <dir name="HTTP">
                <file role="php" name="autoload.php" />
                <file role="php" name="Server.class.php" />
            </dir>

            <dir name="SCGI">
                <file role="php" name="autoload.php" />
                <file role="php" name="Client.class.php" />
                <file role="php" name="ClientRequest.class.php" />
                <file role="php" name="exceptions.php" />
                <file role="php" name="Response.class.php" />
                <file role="php" name="Server.class.php" />
            </dir>

            <dir name="MOD_PHP">
                <file role="php" name="autoload.php" />
                <file role="php" name="exceptions.php" />
                <file role="php" name="Cookies.class.php" />
                <file role="php" name="Handler.class.php" />
                <file role="php" name="Response.class.php" />
            </dir>

            <dir name="Mongrel2">
                <file role="php" name="autoload.php" />
                <file role="php" name="Server.class.php" />
            </dir>

            <dir name="Middleware">
                <dir name="PHP_Compat">
                    <file role="php" name="autoload.php" />
                    <file role="php" name="exceptions.php" />
                    <file role="php" name="Cookies.class.php" />
                    <file role="php" name="PHP_Compat.class.php" />
                    <file role="doc" name="_readme" install-as="PHP_Compat Middleware.readme" />
                </dir>

                <dir name="Session">
                    <file role="php" name="autoload.php" />
                    <file role="php" name="exceptions.php" />
                    <file role="php" name="interfaces.php" />
                    <file role="php" name="Session.class.php" />
                    <file role="php" name="_Engine.class.php" />

                    <dir name="storage">
                        <file role="php" name="FileStorage.class.php" />
                    </dir>

                    <dir name="tests">
                        <file role="test" name="_EngineTest.php" />
                        <file role="test" name="FileStorageTest.php" />
                    </dir>
                </dir>

                <dir name="URLMap">
                    <file role="php" name="autoload.php" />
                    <file role="php" name="exceptions.php" />
                    <file role="php" name="URLMap.class.php" />
                    <file role="doc" name="_notes" install-as="URLMap Middleware.readme" />
                </dir>

                <dir name="Logger">
                    <file role="php" name="autoload.php" />
                    <file role="php" name="Logger.class.php" />
                    <file role="php" name="README" install-as="Logger Middleware.readme" />
                </dir>
            </dir>

            <dir name="Transport">
                <file role="php" name="autoload.php" />
                <file role="php" name="exceptions.php" />
                <file role="php" name="interfaces.php" />
                <file role="php" name="BaseTransport.class.php" />
                <file role="php" name="LibEvent.class.php" />
                <file role="php" name="LibEventStream.class.php" />
                <file role="php" name="LibEventUnbuffered.class.php" />
                <file role="php" name="Socket.class.php" />
                <file role="php" name="ZeroMQ.class.php" />
            </dir>

            <dir name="Apps">
                <dir name="FileServe">
                    <file role="php" name="autoload.php" />
                    <file role="php" name="FileServe.class.php" />
                </dir>
            </dir>

            <dir name="Runner">
                <file role="script" baseinstalldir="/" name="bin/aip">
                  <tasks:replace type="pear-config" from="@PHP-BIN@" to="php_bin"/>
                </file>
                <file role="php" name="autoload.php" />
                <file role="php" name="RunnerApp.class.php" />
                <file role="php" name="Runner.class.php" />
            </dir>
        </dir>
    </contents>

    <dependencies>
        <required>
            <php>
                <min>5.3.0</min>
            </php>
            <pearinstaller>
                <min>1.9.0</min>
            </pearinstaller>
            <package>
                <name>pake</name>
                <channel>pear.indeyets.pp.ru</channel>
            </package>
            <extension>
                <name>mbstring</name>
            </extension>
            <extension>
                <name>spl</name>
            </extension>
        </required>

        <optional>
            <extension>
              <name>pcntl</name>
            </extension>
            <extension>
              <name>posix</name>
            </extension>
        </optional>
    </dependencies>

    <phprelease>
        <installconditions>
            <os>
                <name>windows</name>
            </os>
        </installconditions>
        <filelist>
            <!-- AiP is not windows-compatible -->
        </filelist>
    </phprelease>

    <phprelease>
        <filelist>
            <install as="aip" name="Runner/bin/aip" />
        </filelist>
    </phprelease>

    <changelog>
        <release>
            <date>2010-12-03</date>
            <version>
                <release>0.3.2</release>
                <api>0.3.2</api>
            </version>
            <stability>
                <release>stable</release>
                <api>stable</api>
            </stability>
            <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
            <notes>
                - Handle internal notifications from Mongrel2 correctly
                - Correctly handle premature disconnection of HTTP-clients
                - Check if session.save_path is writable before writing anything there
            </notes>
        </release>
        <release>
            <date>2010-12-02</date>
            <version>
                <release>0.3.1</release>
                <api>0.3.1</api>
            </version>
            <stability>
                <release>stable</release>
                <api>stable</api>
            </stability>
            <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
            <notes>
                - Better handling of slow requests
            </notes>
        </release>
        <release>
            <date>2010-12-01</date>
            <version>
                <release>0.3.0</release>
                <api>0.3.0</api>
            </version>
            <stability>
                <release>stable</release>
                <api>stable</api>
            </stability>
            <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
            <notes>
                - Mongrel2 web-server support. see http://mongrel2.org/home
                - "aip" tool supports SIGTERM, SIGINT and SIGHUP (graceful restart) signals
                - StringStream class is reusable now
                - use unquoted field-name, if file is uploaded to non-array var. closes gh-6 bug
            </notes>
        </release>
        <release>
            <date>2010-06-17</date>
            <version>
                <release>0.2.2</release>
                <api>0.2.2</api>
            </version>
            <stability>
                <release>stable</release>
                <api>stable</api>
            </stability>
            <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
            <notes>
                - Middleware/PHP_Compat: added support for files uploaded to array-vars (Justin Forest)
                - Applications can return streams instead of strings as response-body
                - FileServe doesn't cache files anymore
                - FileServe returns files as streams
            </notes>            
        </release>
        <release>
            <date>2010-05-05</date>
            <version>
                <release>0.2.1</release>
                <api>0.2.1</api>
            </version>
            <stability>
                <release>stable</release>
                <api>stable</api>
            </stability>
            <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
            <notes>
                - added Logger middleware (apache Common Log compatible)
                - fixed typo in Session middleware
            </notes>
        </release>
        <release>
            <date>2010-04-13</date>
            <version>
                <release>0.2.0</release>
                <api>0.2.0</api>
            </version>
            <stability>
                <release>stable</release>
                <api>stable</api>
            </stability>
            <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
            <notes>
                - major internals overhaul
                - HTTP protocol can optionally use "httpparser" php extension http://github.com/dhotson/httpparser-php
                - simple file-serving app "FileServe" is bundled now
                - added "aip" command-line tool, which works as a pre-forking server (not windows-compatible yet)
            </notes>
        </release>
        <release>
            <date>2009-12-18</date>
            <version>
                <release>0.1.1</release>
                <api>0.1.0</api>
            </version>
            <stability>
                <release>beta</release>
                <api>stable</api>
            </stability>
            <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
            <notes>
                - added URLMap middleware
                - defined "Transport" infrastructure for socket-oriented protocols
                - added streamed-sockets transport
                - added libevent transport
                - add direct HTTP-protocol handler (appserver can work without server now)
                - various cleanup
            </notes>
        </release>
        <release>
            <date>2009-12-04</date>
            <version>
                <release>0.1.0</release>
                <api>0.1.0</api>
            </version>
            <stability>
                <release>beta</release>
                <api>stable</api>
            </stability>
            <license uri="http://www.milkfarmsoft.com/bsd.php">BSD license</license>
            <notes>
                -
            </notes>
        </release>
    </changelog>
</package>
